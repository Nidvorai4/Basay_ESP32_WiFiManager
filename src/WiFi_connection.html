#ifndef WIFI_HTML_H
#define WIFI_HTML_H
#include <Arduino.h>

static const char WorkWithoutWiFi_html[] PROGMEM = R"rawliteral(
<!DOCTYPE HTML><html><head>
  <meta charset="UTF-8"><title>–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–µ–∂–∏–º</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { font-family: -apple-system, system-ui, sans-serif; background: #121212; color: #e0e0e0; text-align: center; padding-top: 50px; margin: 0; }
    .card { background: #1e1e1e; padding: 30px; border-radius: 12px; display: inline-block; box-shadow: 0 4px 20px rgba(0,0,0,0.4); border: 1px solid #333; }
    .btn { background: #007bff; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: 500; }
  </style>
</head><body>
  <div class="card">
    <h1>–ù–µ—Ç —Å–µ—Ç–∏</h1>
    <p style="color: #aaa;">–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–º —Ä–µ–∂–∏–º–µ.</p>
    <button class="btn" onclick="location.href='/BasayWiFiSetup'">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Wi-Fi</button>
  </div>
</body></html>)rawliteral";

static const char WiFiSetup_html[] PROGMEM = R"rawliteral(
<!DOCTYPE HTML><html><head>
  <meta charset="UTF-8"><title>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Wi-Fi</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { font-family: -apple-system, system-ui, sans-serif; background: #121212; color: #e0e0e0; text-align: center; padding: 20px; margin: 0; overflow-x: hidden; }
    .card { background: #1e1e1e; padding: 25px; border-radius: 16px; max-width: 380px; margin: auto; border: 1px solid #333; box-shadow: 0 10px 30px rgba(0,0,0,0.5); transition: border-color 0.3s; }
    h2 { margin-top: 0; color: #fff; font-weight: 600; }
    select, input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; background: #2a2a2a; color: #fff; border: 1px solid #444; font-size: 16px; box-sizing: border-box; outline: none; font-family: inherit; }
    .pass-wrapper { position: relative; width: 100%; }
    .eye { position: absolute; right: 12px; top: 20px; cursor: pointer; color: #777; user-select: none; font-size: 18px; z-index: 2; }
    .btn { background: #28a745; color: white; border: none; padding: 14px; width: 100%; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 15px; font-family: inherit; }
    .btn:disabled { background: #333; color: #666; cursor: not-allowed; }
    .link { color: #3f8cff; text-decoration: none; font-size: 14px; cursor: pointer; display: block; margin: 12px 0; }
    .hidden { display: none; }
    .status { color: #ff9f43; font-size: 13px; margin-bottom: 10px; height: 18px; font-weight: 500; }
    
    /* –ò–ù–î–ò–í–ò–î–£–ê–õ–¨–ù–´–ï –¢–†–Ø–°–ö–ò */
    @keyframes shakeH { 0%, 100% { transform: translateX(0); } 25% { transform: translate(-2px, 1px); } 75% { transform: translate(2px, -1px); } }
    @keyframes shakeV { 0%, 100% { transform: translateY(0); } 33% { transform: translate(1px, -2px); } 66% { transform: translate(-1px, 2px); } }
    @keyframes shakeRot { 0%, 100% { transform: rotate(0deg); } 25% { transform: rotate(1deg) scale(1.01); } 75% { transform: rotate(-1deg) scale(0.99); } }

    .shaking { border-color: #ff9f43 !important; }
    .shaking h2 { animation: shakeH 0.15s infinite; color: #ff9f43; }
    .shaking select { animation: shakeRot 0.25s infinite; }
    .shaking .pass-wrapper { animation: shakeV 0.2s infinite; }
    .shaking .btn { animation: shakeH 0.3s infinite; opacity: 0.8; }
    .shaking .link { animation: shakeRot 0.5s infinite; }
  </style>
</head><body>
  <div class="card" id="mainCard">
    <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏</h2>
    <div id="st" class="status">–ü–æ–∏—Å–∫ —Å–µ—Ç–µ–π...</div>
    <form action="/save" method="POST" oninput="validate()">
      <div id="scan_block">
        <select name="s_select" id="nets"><option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option></select>
        <div class="link" onclick="toggleManual(true)">–í–≤–µ—Å—Ç–∏ SSID –≤—Ä—É—á–Ω—É—é</div>
      </div>
      <div id="manual_block" class="hidden">
        <input type="text" name="s_manual" id="manual_ssid" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ (SSID) —Å–µ—Ç–∏">
        <div class="link" onclick="toggleManual(false)">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É</div>
      </div>
      <div class="pass-wrapper">
        <input type="password" name="p" id="pass_input" placeholder="–ü–∞—Ä–æ–ª—å">
        <span class="eye" id="eye_icon" onclick="togglePass()">üëÅÔ∏è</span>
      </div>
      <input type="submit" id="subBtn" class="btn" value="–ü–æ–¥–∫–ª—é—á–∏—Ç—å" disabled>
    </form>
    <div class="link" style="color: #777;" onclick="location.href='/'">–û—Ç–º–µ–Ω–∞</div>
  </div>
  <script>
    let isManual = false;
    function validate() {
      const s = document.getElementById('nets').value;
      const m = document.getElementById('manual_ssid').value;
      document.getElementById('subBtn').disabled = (isManual ? !m : !s);
    }
    function togglePass() {
      const i = document.getElementById('pass_input');
      i.type = (i.type === 'password') ? 'text' : 'password';
      document.getElementById('eye_icon').innerHTML = (i.type === 'password') ? 'üëÅÔ∏è' : 'üôà';
    }
    function toggleManual(m) {
      isManual = m;
      document.getElementById('scan_block').classList.toggle('hidden', m);
      document.getElementById('manual_block').classList.toggle('hidden', !m);
      if(m) document.getElementById('mainCard').classList.remove('shaking');
      else fetchNetworks();
      validate();
    }
    function fetchNetworks() {
      if(isManual) return;
      fetch('/scan').then(res => {
        if (res.status === 200) return res.json();
        if (res.status === 202) { 
          document.getElementById('st').innerHTML = "–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ñ–∏—Ä–∞...";
          document.getElementById('mainCard').classList.add('shaking');
          setTimeout(fetchNetworks, 1500); return null; 
        }
      }).then(data => {
        if (!data) return;
        document.getElementById('mainCard').classList.remove('shaking');
        let s = document.getElementById('nets'); s.innerHTML = "<option value=''>–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ç—å...</option>";
        data.sort((a,b) => b.rssi - a.rssi).forEach(n => {
          let o = document.createElement('option'); o.value = n.ssid;
          o.innerHTML = n.ssid + " (" + n.rssi + " dBm)"; s.appendChild(o);
        });
        document.getElementById('st').innerHTML = "–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à—É —Å–µ—Ç—å";
        validate();
      }).catch(() => { setTimeout(fetchNetworks, 3000); });
    }
    window.onload = fetchNetworks;
  </script>
</body></html>)rawliteral";

static const char WiFiConnectedIndex_html[] PROGMEM = R"rawliteral(
<!DOCTYPE HTML><html><head>
  <meta charset="UTF-8"><title>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ–Ω–ª–∞–π–Ω</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { font-family: -apple-system, sans-serif; background: #121212; color: #e0e0e0; text-align: center; padding: 20px; margin: 0; }
    .card { background: #1e1e1e; padding: 30px; border-radius: 16px; display: inline-block; box-shadow: 0 4px 20px rgba(0,0,0,0.4); border-top: 4px solid #28a745; max-width: 350px; }
    h1 { color: #fff; margin-bottom: 10px; }
    .btn-reset { background: #dc3545; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; margin-top: 25px; transition: 0.2s; }
  </style>
</head><body>
  <div class="card">
    <h1>–û–Ω–ª–∞–π–Ω</h1>
    <p style="color: #aaa;">–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ —Å–µ—Ç–∏.</p>
    <button class="btn-reset" onclick="if(confirm('–°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Wi-Fi –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å?')) location.href='/reset_now'">–°–±—Ä–æ—Å–∏—Ç—å Wi-Fi</button>
  </div>
</body></html>)rawliteral";

#endif
