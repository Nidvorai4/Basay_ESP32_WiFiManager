#ifndef BASAY_WIFI_HTML_H
#define BASAY_WIFI_HTML_H
#include <Arduino.h>


const char BasayWiFi_AP_WelcomeScreen_html[] PROGMEM = R"=====(
<!DOCTYPE HTML><html lang='ru'><head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width,initial-scale=1'>
<style>
  body{background:#121212;color:#e0e0e0;font-family:sans-serif;text-align:center;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0;}
  .card{background:#1e1e1e;padding:30px;border-radius:20px;border:1px solid #333;width:90%;max-width:400px;box-shadow:0 10px 30px rgba(0,0,0,0.5);}
  h2{color:#ff9800;margin-top:0;}
  .info{background:#000;padding:20px;border-radius:12px;margin:20px 0;text-align:left;border:1px solid #444;position:relative;}
  code{color:#3f8cff;font-size:1.1em;word-break:break-all;display:inline-block;margin-top:8px;}
  
  /* –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ */
  @keyframes grow {
    0% { transform: scale(0); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
  }
  .btn{display:block;width:100%;padding:15px;margin:10px 0;border-radius:12px;border:none;font-size:16px;font-weight:bold;cursor:pointer;text-decoration:none;transition:0.2s;box-sizing:border-box;}
  .btn-go{background:#28a745;color:#fff;animation:grow 2s ease-out forwards; overflow:hidden; white-space:nowrap;}
  .btn-setup{background:#3f8cff;color:#fff;}
  
  .cp-btn{background:#333;color:#fff;font-size:10px;padding:5px 10px;border-radius:4px;cursor:pointer;float:right;border:1px solid #555;}
  .label{font-size:0.85em; color:#888;}
</style>
</head><body><div class='card'>
  <h2>–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–µ–∂–∏–º</h2>
  <p style='font-size:0.9em;opacity:0.8;'>–°–µ—Ç—å ESP –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ.</p>
  
  <div class='info'>
    <span class='label'>–ê–¥—Ä–µ—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:</span>
    <button class='cp-btn' onclick="cp('http://BASAY_LOCAL_IP_ADDR/')">COPY</button><br>
    <code>http://BASAY_LOCAL_IP_ADDR/</code>
  </div>

  <a href='http://BASAY_LOCAL_IP_ADDR/' class='btn btn-go' onclick="forceClose()">–û–¢–ö–†–´–¢–¨ –ü–†–ò–õ–û–ñ–ï–ù–ò–ï</a>
  <a href='/BasayWiFiSetup' class='btn btn-setup'>–ù–ê–°–¢–†–û–ô–ö–ò WI-FI</a>
</div>

<input type="text" id="copyBuffer" style="position:absolute; left:-9999px;">

<script>
  // –°—Ä–∞–∑—É –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–≤—Ç–∏—Ö—É—é" –æ—Ç–∫—Ä—ã–≤–∞–µ–º —à–ª—é–∑ –Ω–∞ ESP
  window.onload = function() {
    fetch('/BasayWiFi_CloseCaptivePortal');
    fetch('/generate_204');
  };

  function cp(text){
    var bf = document.getElementById('copyBuffer');
    bf.value = text;
    bf.select();
    document.execCommand('copy');
    alert('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ');
  }

  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –ø—Ä–∏ –∫–ª–∏–∫–µ
  function forceClose() {
    setTimeout(() => {
      location.href = 'http://connectivitycheck.gstatic.com';
    }, 1000);
  }
</script>
</body></html>
)=====";




static const char WiFiSetup_html[] PROGMEM = R"rawliteral(
<!DOCTYPE HTML><html><head>
  <meta charset="UTF-8"><title>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Wi-Fi</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { font-family: -apple-system, sans-serif; background: #121212; color: #e0e0e0; text-align: center; padding: 20px; margin: 0; overflow-x: hidden; }
    .card { background: #1e1e1e; padding: 25px; border-radius: 16px; max-width: 380px; margin: auto; border: 1px solid #333; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
    select, input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; background: #2a2a2a; color: #fff; border: 1px solid #444; font-size: 16px; box-sizing: border-box; outline: none; }
    .pass-wrapper { position: relative; width: 100%; }
    .eye { position: absolute; right: 12px; top: 20px; cursor: pointer; color: #777; font-size: 18px; z-index: 2; }
    .btn { background: #28a745; color: white; border: none; padding: 14px; width: 100%; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 15px; }
    .btn:disabled { background: #333; color: #666; }
    .link { color: #3f8cff; text-decoration: none; font-size: 14px; cursor: pointer; display: block; margin: 12px 0; }
    .hidden { display: none; }
    .status { color: #ff9f43; font-size: 13px; margin-bottom: 10px; height: 18px; }
    @keyframes shakeH { 0%, 100% { transform: translateX(0); } 25% { transform: translate(-2px, 1px); } 75% { transform: translate(2px, -1px); } }
    @keyframes shakeV { 0%, 100% { transform: translateY(0); } 33% { transform: translate(1px, -2px); } 66% { transform: translate(-1px, 2px); } }
    @keyframes shakeRot { 0%, 100% { transform: rotate(0deg); } 25% { transform: rotate(1deg); } 75% { transform: rotate(-1deg); } }
    .shaking h2 { animation: shakeH 0.15s infinite; color: #ff9f43; }
    .shaking select { animation: shakeRot 0.25s infinite; }
    .shaking .pass-wrapper { animation: shakeV 0.2s infinite; }
  </style>
</head><body>
  <div class="card" id="mainCard">
    <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏</h2>
    <div id="st" class="status">–ü–æ–∏—Å–∫ —Å–µ—Ç–µ–π...</div>
    <form action="/BasayWiFi_save" method="POST" oninput="validate()">
      <div id="scan_block">
        <select name="s_select" id="nets"><option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option></select>
        <div class="link" onclick="toggleManual(true)">–í–≤–µ—Å—Ç–∏ SSID –≤—Ä—É—á–Ω—É—é</div>
      </div>
      <div id="manual_block" class="hidden">
        <input type="text" name="s_manual" id="manual_ssid" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ (SSID) —Å–µ—Ç–∏">
        <div class="link" onclick="toggleManual(false)">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É</div>
      </div>
      <div class="pass-wrapper">
        <input type="password" name="p" id="pass_input" placeholder="–ü–∞—Ä–æ–ª—å">
        <span class="eye" id="eye_icon" onclick="togglePass()">üëÅÔ∏è</span>
      </div>
      <input type="submit" id="subBtn" class="btn" value="–ü–æ–¥–∫–ª—é—á–∏—Ç—å" disabled>
    </form>
    <div class="link" style="color: #777;" onclick="location.href='/'">–û—Ç–º–µ–Ω–∞</div>
  </div>
  <script>
    let isManual = false;
    function validate() {
      const s = document.getElementById('nets').value;
      const m = document.getElementById('manual_ssid').value;
      document.getElementById('subBtn').disabled = (isManual ? !m : !s);
    }
    function togglePass() {
      const i = document.getElementById('pass_input');
      i.type = (i.type === 'password') ? 'text' : 'password';
      document.getElementById('eye_icon').innerHTML = (i.type === 'password') ? 'üëÅÔ∏è' : 'üôà';
    }
    function toggleManual(m) {
      isManual = m;
      document.getElementById('scan_block').classList.toggle('hidden', m);
      document.getElementById('manual_block').classList.toggle('hidden', !m);
      if(!m) fetchNetworks();
      validate();
    }
    function fetchNetworks() {
      if(isManual) return;
      fetch('/BasayWiFi_scan').then(res => {
        if (res.status === 200) return res.json();
        if (res.status === 202) { 
          document.getElementById('st').innerHTML = "–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ñ–∏—Ä–∞...";
          document.getElementById('mainCard').classList.add('shaking');
          setTimeout(fetchNetworks, 1500); return null; 
        }
      }).then(data => {
        if (!data) return;
        document.getElementById('mainCard').classList.remove('shaking');
        let s = document.getElementById('nets'); s.innerHTML = "<option value=''>–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ç—å...</option>";
        data.sort((a,b) => b.rssi - a.rssi).forEach(n => {
          let o = document.createElement('option'); o.value = n.ssid;
          o.innerHTML = n.ssid + " (" + n.rssi + " dBm)"; s.appendChild(o);
        });
        document.getElementById('st').innerHTML = "–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à—É —Å–µ—Ç—å";
        validate();
      }).catch(() => { setTimeout(fetchNetworks, 3000); });
    }
    window.onload = fetchNetworks;
  </script>
</body></html>)rawliteral";

#endif
